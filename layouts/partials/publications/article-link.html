{{/* layouts/partials/research/article-link.html */}}

<article class="max-w-prose border-b border-neutral-200/70 pb-8 pt-4 dark:border-neutral-700/70">

  {{/* --- TITLE --- */}}
  {{/* Use $.Title to access the page title from the root context */}}
  <h3 class="text-lg font-semibold text-neutral-800 dark:text-neutral-100">
    {{ $.Title | emojify }}
  </h3>

{{/* --- METADATA: Authors, Venue/Status, & Year --- */}}
<div class="mt-1 flex flex-wrap items-center gap-x-2 text-sm text-neutral-600 dark:text-neutral-400">
  {{ if $.Params.authors }}
    <p>
      {{/* Use $.Params.authors to access authors from the root context */}}
      {{- range $index, $author := $.Params.authors -}}
        {{- $isEqual := strings.Contains $author "*" -}}
        {{- $cleanAuthor := replace $author "*" "" -}}
        <span class="font-medium">{{ $cleanAuthor }}</span>{{ if $isEqual }}<sup title="Equal contribution">*</sup>{{ end }}{{ if lt (add $index 1) (len $.Params.authors) }},{{ end }}&nbsp;
      {{- end -}}
    </p>
  {{ end }}

  {{ if or $.Params.avenue (not .Date.IsZero) }}
    <span class="text-sm text-neutral-500 dark:text-neutral-400">
      {{ if $.Params.avenue }}
        {{ $.Params.avenue }}
      {{ else if not .Date.IsZero }}
        <time datetime="{{ .Date.Format "2006-01-02" }}">
          ({{ .Date.Format "2006" }}).
        </time>
      {{ end }}
    </span>
  {{ end }}
</div>

  {{/* --- TL;DR SECTION --- */}}
  {{ if $.Params.tldr }}
    <p class="mt-4 text-sm text-neutral-700 dark:text-neutral-300">
      {{ $.Params.tldr | emojify }}
    </p>
  {{ end }}

  {{/* --- KEYWORDS SECTION (Styled as Tags) --- */}}
  {{ if $.Params.keywords }}
    <div class="mt-4 flex flex-wrap items-center gap-2">
      {{/* Inside this loop, "." becomes a keyword string. This is why we must use "$" elsewhere. */}}
      {{ range $.Params.keywords }}
        <span class="rounded-full bg-neutral-100 px-3 py-1 text-xs font-medium text-neutral-700 dark:bg-neutral-800 dark:text-neutral-300">
          {{ . }}
        </span>
      {{ end }}
    </div>
  {{ end }}

{{/* --- LINK SECTION (Styled as Green Button) --- */}}
{{/* Inline links: show both on the same line when present */}}
  {{ if or $.Params.arxivUrl $.Params.neuripsUrl or $.Params.codeUrl }}
  <div class="prose py-1 mt-2 dark:prose-invert flex flex-wrap items-center gap-6">
      {{ if $.Params.arxivUrl }}
        <a href="{{ .Params.arxivUrl }}" class="default-link hover:underline hover:decoration-2 hover:underline-offset-2 mr-2">[arXiv(preferred)]</a>
      {{ end }}
      {{ if $.Params.neuripsUrl }}
        <a href="{{ .Params.neuripsUrl }}" class="default-link hover:underline hover:decoration-2 hover:underline-offset-2 mr-2">[NeurIPS]</a>
      {{ end }}
      {{ if $.Params.codeUrl }}
        <a href="{{ .Params.codeUrl }}" class="default-link hover:underline hover:decoration-2 hover:underline-offset-2 mr-2">[Code]</a>
      {{ end }}
    </div>
  {{ end }}

</article>